<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSH Tunnel Manager - Help</title>
    <!-- Material Design CSS -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/help.css">

    <!-- Configurable Links -->
    <script>
        // Configure your project links here
        window.PROJECT_CONFIG = {
            dockerHubUrl: 'https://hub.docker.com/r/oaklight/autossh-tunnel',
            githubUrl: 'https://github.com/Oaklight/autossh-tunnel-dockerized',
            projectName: 'SSH Tunnel Manager'
        };
    </script>
</head>

<body class="mdc-typography">
    <!-- App Bar -->
    <header class="mdc-top-app-bar mdc-top-app-bar--fixed">
        <div class="mdc-top-app-bar__row">
            <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                <button class="material-icons mdc-top-app-bar__navigation-icon" id="backButton">arrow_back</button>
                <span class="mdc-top-app-bar__title">Help & Documentation</span>
            </section>
            <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end">
                <div class="corner-icons">
                    <div class="corner-icon-wrapper">
                        <a href="#" id="dockerhub-link" target="_blank" class="corner-icon" data-tooltip="Docker Hub">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m0 2.716h2.118a.186.186 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.186.186 0 00-.186.185v1.887c0 .102.084.186.186.186m-2.93 0h2.12a.186.186 0 00.185-.186V6.29a.186.186 0 00-.185-.185H8.1a.186.186 0 00-.186.185v1.887c0 .102.084.186.186.186m-2.964 0h2.119a.186.186 0 00.186-.186V6.29a.186.186 0 00-.186-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.186.186.186m5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m-2.93 0h2.12a.186.186 0 00.185-.185V9.006a.186.186 0 00-.185-.186H8.1a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m-2.964 0h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186H5.136a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338 0-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983 0 1.97-.084 2.943-.25 1.225-.208 2.42-.598 3.554-1.146 1.147-.563 2.215-1.291 3.168-2.168.814-.75 1.518-1.607 2.05-2.553.404-.719.71-1.482.918-2.273a4.4 4.4 0 001.372.22c1.109 0 2.179-.536 2.717-1.36.189-.292.33-.609.415-.943l.034-.14-.079-.106z" />
                            </svg>
                        </a>
                        <div class="tooltip" id="dockerhub-tooltip"></div>
                    </div>
                    <div class="corner-icon-wrapper">
                        <a href="#" id="github-link" target="_blank" class="corner-icon" data-tooltip="GitHub">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                            </svg>
                        </a>
                        <div class="tooltip" id="github-tooltip"></div>
                    </div>
                </div>
            </section>
        </div>
    </header>

    <!-- Main Content -->
    <main class="mdc-top-app-bar--fixed-adjust">
        <div class="help-container">
            <!-- Table of Contents -->
            <div class="help-toc">
                <h3>ç›®å½•</h3>
                <ul>
                    <li><a href="#overview">æ¦‚è¿°</a></li>
                    <li><a href="#setup">å¿«é€Ÿè®¾ç½®</a></li>
                    <li><a href="#web-config">ç½‘é¡µé…ç½®</a></li>
                    <li><a href="#yaml-config">YAMLé…ç½®</a></li>
                    <li><a href="#ssh-config">SSHé…ç½®</a></li>
                    <li><a href="#advanced">é«˜çº§é…ç½®</a></li>
                    <li><a href="#troubleshooting">æ•…éšœæ’é™¤</a></li>
                </ul>
            </div>

            <!-- Help Content -->
            <div class="help-content">
                <!-- Overview Section -->
                <section id="overview" class="help-section">
                    <h2><i class="material-icons">info</i> æ¦‚è¿°</h2>
                    <div class="help-card">
                        <p>SSH Tunnel Manager æ˜¯ä¸€ä¸ªåŸºäº Docker çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ <code>autossh</code> å’Œ YAML é…ç½®æ–‡ä»¶æ¥ç®¡ç† SSH éš§é“ã€‚</p>

                        <h4>ä¸»è¦åŠŸèƒ½ï¼š</h4>
                        <ul>
                            <li><strong>DockeråŒ–</strong>ï¼šç¯å¢ƒå°è£…ï¼Œæ˜“äºéƒ¨ç½²å’Œç®¡ç†</li>
                            <li><strong>ç½‘é¡µé…ç½®</strong>ï¼šé€šè¿‡å¯è§†åŒ–ç•Œé¢ç®¡ç†éš§é“é…ç½®</li>
                            <li><strong>è‡ªåŠ¨é‡è½½</strong>ï¼šæ£€æµ‹é…ç½®å˜åŒ–å¹¶è‡ªåŠ¨é‡è½½æœåŠ¡</li>
                            <li><strong>åŒå‘éš§é“</strong>ï¼šæ”¯æŒæœ¬åœ°åˆ°è¿œç¨‹å’Œè¿œç¨‹åˆ°æœ¬åœ°çš„éš§é“</li>
                            <li><strong>å¤šæ¶æ„æ”¯æŒ</strong>ï¼šæ”¯æŒ AMD64ã€ARM64 ç­‰å¤šç§æ¶æ„</li>
                        </ul>
                    </div>
                </section>

                <!-- Quick Setup Section -->
                <section id="setup" class="help-section">
                    <h2><i class="material-icons">rocket_launch</i> å¿«é€Ÿè®¾ç½®</h2>
                    <div class="help-card">
                        <h4>1. ä¸‹è½½é…ç½®æ–‡ä»¶</h4>
                        <div class="code-block">
                            <pre><code>mkdir autossh-tunnel
cd autossh-tunnel

# ä¸‹è½½ docker-compose.yaml
curl -O https://oaklight.github.io/autossh-tunnel-dockerized/compose.yaml

# åˆ›å»ºé…ç½®ç›®å½•
mkdir config
touch config/config.yaml</code></pre>
                        </div>

                        <h4>2. é…ç½®ç”¨æˆ·æƒé™</h4>
                        <div class="code-block">
                            <pre><code># æŸ¥çœ‹å½“å‰ç”¨æˆ· UID/GID
id

# è®¾ç½®ç¯å¢ƒå˜é‡
export PUID=$(id -u)
export PGID=$(id -g)</code></pre>
                        </div>

                        <h4>3. å¯åŠ¨æœåŠ¡</h4>
                        <div class="code-block">
                            <pre><code>docker compose up -d</code></pre>
                        </div>

                        <h4>4. è®¿é—®ç½‘é¡µç•Œé¢</h4>
                        <p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š<a href="http://localhost:5000" target="_blank">http://localhost:5000</a></p>
                    </div>
                </section>

                <!-- Web Configuration Section -->
                <section id="web-config" class="help-section">
                    <h2><i class="material-icons">web</i> ç½‘é¡µé…ç½®</h2>
                    <div class="help-card">
                        <h4>ç•Œé¢è¯´æ˜ï¼š</h4>
                        <ul>
                            <li><strong>Name</strong>ï¼šéš§é“åç§°ï¼Œç”¨äºæ ‡è¯†</li>
                            <li><strong>Status</strong>ï¼šéš§é“å½“å‰çŠ¶æ€ï¼ˆè¿è¡Œ/åœæ­¢/é”™è¯¯ï¼‰</li>
                            <li><strong>Remote Host</strong>ï¼šè¿œç¨‹ä¸»æœºåœ°å€ï¼ˆå¦‚ï¼šuser@server.comï¼‰</li>
                            <li><strong>Remote Port</strong>ï¼šè¿œç¨‹ç«¯å£æˆ–ä¸»æœº:ç«¯å£æ ¼å¼</li>
                            <li><strong>Local Port</strong>ï¼šæœ¬åœ°ç«¯å£æˆ–IP:ç«¯å£æ ¼å¼</li>
                            <li><strong>Direction</strong>ï¼šéš§é“æ–¹å‘ï¼ˆè¿œç¨‹åˆ°æœ¬åœ°/æœ¬åœ°åˆ°è¿œç¨‹ï¼‰</li>
                            <li><strong>Actions</strong>ï¼šæ“ä½œæŒ‰é’®ï¼ˆäº¤äº’è®¤è¯/åˆ é™¤ï¼‰</li>
                        </ul>

                        <h4>äº¤äº’è®¤è¯ï¼š</h4>
                        <p>ç‚¹å‡»æŒ‡çº¹å›¾æ ‡å¯ä»¥åˆ‡æ¢äº¤äº’è®¤è¯çŠ¶æ€ï¼š</p>
                        <ul>
                            <li><span style="color: #4caf50;">ğŸ«† ç»¿è‰²</span>ï¼šå¯ç”¨äº¤äº’è®¤è¯</li>
                            <li><span style="color: #9e9e9e;">ğŸ«† ç°è‰²</span>ï¼šç¦ç”¨äº¤äº’è®¤è¯</li>
                        </ul>

                        <h4>ä¿å­˜é…ç½®ï¼š</h4>
                        <p>ç‚¹å‡» <strong style="color: #ff9800;">Save & Restart</strong> æŒ‰é’®ä¿å­˜é…ç½®å¹¶é‡å¯éš§é“æœåŠ¡ã€‚</p>
                    </div>
                </section>

                <!-- YAML Configuration Section -->
                <section id="yaml-config" class="help-section">
                    <h2><i class="material-icons">description</i> YAMLé…ç½®</h2>
                    <div class="help-card">
                        <h4>åŸºæœ¬æ ¼å¼ï¼š</h4>
                        <div class="code-block">
                            <pre><code>tunnels:
  # å°†æœ¬åœ°æœåŠ¡æš´éœ²åˆ°è¿œç¨‹æœåŠ¡å™¨
  - name: "web-service"
    remote_host: "user@remote-host1"
    remote_port: 22323
    local_port: 18120
    direction: local_to_remote
    interactive: false
    
  # å°†è¿œç¨‹æœåŠ¡æ˜ å°„åˆ°æœ¬åœ°ç«¯å£
  - name: "database"
    remote_host: "user@remote-host2"
    remote_port: 8000
    local_port: 8001
    direction: remote_to_local
    interactive: true</code></pre>
                        </div>

                        <h4>é«˜çº§é…ç½® - æŒ‡å®šç»‘å®šåœ°å€ï¼š</h4>
                        <div class="code-block">
                            <pre><code>tunnels:
  # æŒ‡å®šè¿œç¨‹ç»‘å®šåœ°å€
  - remote_host: "user@server"
    remote_port: "192.168.45.130:22323"
    local_port: 18120
    direction: local_to_remote
    
  # æŒ‡å®šæœ¬åœ°ç»‘å®šåœ°å€
  - remote_host: "user@server"
    remote_port: 22323
    local_port: "192.168.1.100:18120"
    direction: local_to_remote</code></pre>
                        </div>
                    </div>
                </section>

                <!-- SSH Configuration Section -->
                <section id="ssh-config" class="help-section">
                    <h2><i class="material-icons">vpn_key</i> SSHé…ç½®</h2>
                    <div class="help-card">
                        <p><strong>é‡è¦</strong>ï¼šæœ¬é¡¹ç›®ä¸¥é‡ä¾èµ– <code>~/.ssh/config</code> æ–‡ä»¶è¿›è¡Œ SSH è¿æ¥é…ç½®ã€‚</p>

                        <h4>SSHé…ç½®æ–‡ä»¶ç¤ºä¾‹ (~/.ssh/config)ï¼š</h4>
                        <div class="code-block">
                            <pre><code>Host myserver
    HostName 192.168.1.100
    User myuser
    Port 22
    IdentityFile ~/.ssh/id_ed25519
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null

Host production
    HostName prod.example.com
    User deploy
    Port 2222
    IdentityFile ~/.ssh/prod_key
    ProxyJump bastion</code></pre>
                        </div>

                        <h4>SSHå¯†é’¥æƒé™ï¼š</h4>
                        <div class="code-block">
                            <pre><code>chmod 700 ~/.ssh
chmod 600 ~/.ssh/*
chmod 644 ~/.ssh/*.pub</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Advanced Configuration Section -->
                <section id="advanced" class="help-section">
                    <h2><i class="material-icons">settings</i> é«˜çº§é…ç½®</h2>
                    <div class="help-card">
                        <h4>ç¯å¢ƒå˜é‡ï¼š</h4>
                        <ul>
                            <li><code>PUID</code>ï¼šå®¹å™¨ç”¨æˆ· UIDï¼ˆé»˜è®¤ï¼š1000ï¼‰</li>
                            <li><code>PGID</code>ï¼šå®¹å™¨ç”¨æˆ· GIDï¼ˆé»˜è®¤ï¼š1000ï¼‰</li>
                        </ul>

                        <h4>ç«¯å£æ ¼å¼ï¼š</h4>
                        <ul>
                            <li><strong>ç®€å•ç«¯å£</strong>ï¼š<code>8080</code></li>
                            <li><strong>ä¸»æœº:ç«¯å£</strong>ï¼š<code>hostname:8080</code></li>
                            <li><strong>IP:ç«¯å£</strong>ï¼š<code>192.168.1.100:8080</code></li>
                        </ul>

                        <h4>éš§é“æ–¹å‘ï¼š</h4>
                        <ul>
                            <li><code>remote_to_local</code>ï¼šå°†è¿œç¨‹æœåŠ¡æ˜ å°„åˆ°æœ¬åœ°ï¼ˆé»˜è®¤ï¼‰</li>
                            <li><code>local_to_remote</code>ï¼šå°†æœ¬åœ°æœåŠ¡æš´éœ²åˆ°è¿œç¨‹</li>
                        </ul>

                        <h4>å®‰å…¨æ³¨æ„äº‹é¡¹ï¼š</h4>
                        <p>å¯ç”¨è¿œç¨‹ç«¯å£è½¬å‘æ—¶ï¼Œå¯èƒ½éœ€è¦åœ¨è¿œç¨‹æœåŠ¡å™¨é…ç½® <code>GatewayPorts</code>ï¼š</p>
                        <div class="code-block">
                            <pre><code># ç¼–è¾‘ /etc/ssh/sshd_config
GatewayPorts clientspecified

# é‡å¯ SSH æœåŠ¡
sudo systemctl restart sshd</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Troubleshooting Section -->
                <section id="troubleshooting" class="help-section">
                    <h2><i class="material-icons">bug_report</i> æ•…éšœæ’é™¤</h2>
                    <div class="help-card">
                        <h4>å¸¸è§é—®é¢˜ï¼š</h4>

                        <div class="troubleshoot-item">
                            <h5>ğŸ”´ éš§é“è¿æ¥å¤±è´¥</h5>
                            <ul>
                                <li>æ£€æŸ¥ SSH é…ç½®æ–‡ä»¶ <code>~/.ssh/config</code></li>
                                <li>éªŒè¯ SSH å¯†é’¥æƒé™</li>
                                <li>ç¡®è®¤è¿œç¨‹ä¸»æœºå¯è®¿é—®</li>
                            </ul>
                        </div>

                        <div class="troubleshoot-item">
                            <h5>ğŸ”´ æƒé™é”™è¯¯</h5>
                            <ul>
                                <li>æ£€æŸ¥ PUID/PGID è®¾ç½®</li>
                                <li>ç¡®è®¤ SSH å¯†é’¥æ–‡ä»¶æƒé™</li>
                                <li>éªŒè¯ Docker ç”¨æˆ·ç»„æƒé™</li>
                            </ul>
                        </div>

                        <div class="troubleshoot-item">
                            <h5>ğŸ”´ é…ç½®ä¸ç”Ÿæ•ˆ</h5>
                            <ul>
                                <li>æ£€æŸ¥ YAML è¯­æ³•æ˜¯å¦æ­£ç¡®</li>
                                <li>ç¡®è®¤é…ç½®æ–‡ä»¶è·¯å¾„</li>
                                <li>é‡å¯å®¹å™¨æœåŠ¡</li>
                            </ul>
                        </div>

                        <h4>æŸ¥çœ‹æ—¥å¿—ï¼š</h4>
                        <div class="code-block">
                            <pre><code># æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker compose logs -f autossh
docker compose logs -f web</code></pre>
                        </div>

                        <h4>é‡å¯æœåŠ¡ï¼š</h4>
                        <div class="code-block">
                            <pre><code># é‡å¯æ‰€æœ‰æœåŠ¡
docker compose restart

# é‡å¯ç‰¹å®šæœåŠ¡
docker compose restart autossh</code></pre>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Material Design JavaScript -->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>

    <!-- Help Page JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize corner icon links
            const dockerhubLink = document.getElementById('dockerhub-link');
            const githubLink = document.getElementById('github-link');
            const dockerhubTooltip = document.getElementById('dockerhub-tooltip');
            const githubTooltip = document.getElementById('github-tooltip');

            // Set URLs from configuration
            if (window.PROJECT_CONFIG) {
                dockerhubLink.href = window.PROJECT_CONFIG.dockerHubUrl;
                githubLink.href = window.PROJECT_CONFIG.githubUrl;
            }

            // Back button functionality
            const backButton = document.getElementById('backButton');
            backButton.addEventListener('click', function () {
                window.history.back();
            });

            // Smooth scrolling for TOC links
            const tocLinks = document.querySelectorAll('.help-toc a');
            tocLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Highlight current section in TOC
            const sections = document.querySelectorAll('.help-section');
            const tocItems = document.querySelectorAll('.help-toc a');

            function highlightCurrentSection() {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (window.pageYOffset >= sectionTop - 100) {
                        current = section.getAttribute('id');
                    }
                });

                tocItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('href') === '#' + current) {
                        item.classList.add('active');
                    }
                });
            }

            window.addEventListener('scroll', highlightCurrentSection);
            highlightCurrentSection(); // Initial call
        });
    </script>
</body>

</html>